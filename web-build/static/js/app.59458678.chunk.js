(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{212:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return _}));var a=n(8),r=n(330),i=n(21),c=n.n(i),o=n(11),s=n.n(o),l=n(6),u=n(81),d=n(0),j=n(29),h=n(83),f=n(183),b=n(75),p=n(51),O=Object(f.initializeApp)({apiKey:"AIzaSyDtj8g_7IHyg1E-_5HRNQeWhAyiqxHkc1o",authDomain:"signal-d494c.firebaseapp.com",projectId:"signal-d494c",storageBucket:"signal-d494c.appspot.com",messagingSenderId:"323749966958",appId:"1:323749966958:web:1c7d8a3524d12b312b627f",measurementId:"G-H0F7NMDYHB"}),g=Object(b.getAuth)(O),m=Object(p.getFirestore)(O),x=n(2),y=function(e){var t=e.navigation,n=Object(d.useState)(""),a=s()(n,2),r=a[0],i=a[1],o=Object(d.useState)(""),f=s()(o,2),p=f[0],O=f[1];Object(d.useEffect)((function(){return Object(b.onAuthStateChanged)(g,(function(e){e&&t.replace("Home")}))}),[]);var m=function(){var e=c()((function*(){try{yield Object(b.signInWithEmailAndPassword)(g,r,p)}catch(e){alert(err.message)}}));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)(u.default,{behavior:"padding",style:v.container,children:[Object(x.jsx)(h.StatusBar,{style:"light"}),Object(x.jsx)(j.Image,{source:{uri:"https://img.onl/TpK2Sb"},style:{width:200,height:200}}),Object(x.jsxs)(l.default,{style:v.inputContainer,children:[Object(x.jsx)(j.Input,{placeholder:"Email",autoFocus:!0,type:"email",value:r,onChangeText:function(e){return i(e)}}),Object(x.jsx)(j.Input,{placeholder:"Password",secureTextEntry:!0,type:"password",value:p,onChangeText:function(e){return O(e)}})]}),Object(x.jsx)(j.Button,{containerStyle:v.button,onPress:m,title:"Login"}),Object(x.jsx)(j.Button,{containerStyle:v.button,onPress:function(){return t.navigate("Register")},type:"outline",title:"Register"})]})},v=a.default.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"white"},inputContainer:{width:300},button:{width:200,marginTop:10}}),C=n(31),S=function(e){var t=e.navigation,n=Object(d.useState)(""),a=s()(n,2),r=a[0],i=a[1],o=Object(d.useState)(""),f=s()(o,2),p=f[0],O=f[1],m=Object(d.useState)(""),y=s()(m,2),v=y[0],S=y[1],T=Object(d.useState)(""),k=s()(T,2),E=k[0],I=k[1];Object(d.useLayoutEffect)((function(){t.setOptions({headerBackTitle:"Login"})}),[t]);var L=function(){var e=c()((function*(){try{yield Object(b.createUserWithEmailAndPassword)(g,p,v),Object(b.updateProfile)(g.currentUser,{displayName:r,photoURL:E||"https://img.onl/TpK2Sb"})}catch(err){alert(err.message)}}));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)(u.default,{behavior:"padding",style:w.container,children:[Object(x.jsx)(h.StatusBar,{style:"light"}),Object(x.jsx)(C.default,{h3:!0,style:{marginBottom:50},children:"Create a Signal account"}),Object(x.jsxs)(l.default,{style:w.inputContainer,children:[Object(x.jsx)(j.Input,{placeholder:"Full Name",autoFocus:!0,type:"text",value:r,onChangeText:function(e){return i(e)}}),Object(x.jsx)(j.Input,{placeholder:"Email",type:"email",value:p,onChangeText:function(e){return O(e)}}),Object(x.jsx)(j.Input,{placeholder:"Password",secureTextEntry:!0,type:"password",value:v,onChangeText:function(e){return S(e)}}),Object(x.jsx)(j.Input,{placeholder:"Profile Picture URL (optional)",type:"text",value:E,onChangeText:function(e){return I(e)},onSubmitEditing:L})]}),Object(x.jsx)(j.Button,{style:w.button,raised:!0,onPress:L,title:"Register"}),Object(x.jsx)(l.default,{style:{height:100}})]})},w=a.default.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"white"},inputContainer:{width:300},button:{width:200,marginTop:10}}),T=n(105),k=n(62),E=n(55),I=function(e){var t,n,a,r=e.id,i=e.chatName,c=e.enterChat,o=Object(d.useState)(""),l=s()(o,2),u=l[0],h=l[1];return Object(d.useEffect)((function(){var e=Object(p.doc)(m,"chats",r),t=Object(p.query)(Object(p.collection)(e,"messages"),Object(p.orderBy)("timestamp","desc"));return Object(p.onSnapshot)(t,(function(e){return h(e.docs.map((function(e){return e.data()})))}))})),Object(x.jsxs)(j.ListItem,{onPress:function(){return c(r,i)},bottomDivider:!0,children:[Object(x.jsx)(j.Avatar,{rounded:!0,source:{uri:(null==u||null==(t=u[0])?void 0:t.photoURL)||"https://img.onl/TpK2Sb"}}),Object(x.jsxs)(j.ListItem.Content,{children:[Object(x.jsx)(j.ListItem.Title,{style:{fontWeight:"800"},children:i}),Object(x.jsxs)(j.ListItem.Subtitle,{numberOfLines:1,ellipsizeMode:"tail",children:[null==u||null==(n=u[0])?void 0:n.displayName," : ",null==u||null==(a=u[0])?void 0:a.message]})]})]},r)},L=n(325),B=n(326),R=function(e){var t=e.navigation,n=Object(d.useState)([]),a=s()(n,2),r=a[0],i=a[1],o=function(){var e=c()((function*(){try{yield g.signOut(),t.replace("Login")}catch(e){}}));return function(){return e.apply(this,arguments)}}();Object(d.useEffect)((function(){return Object(p.onSnapshot)(Object(p.collection)(m,"chats"),(function(e){return i(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))})),Object(d.useLayoutEffect)((function(){t.setOptions({title:"Signal",headerStyle:{backgroundColor:"#fff"},headerTitleStyle:{color:"black"},headerTintColor:"black",headerLeft:function(){var e;return Object(x.jsx)(l.default,{children:Object(x.jsx)(E.default,{onPress:o,activeOpacity:.5,children:Object(x.jsx)(j.Avatar,{rounded:!0,source:{uri:(null==g||null==(e=g.currentUser)?void 0:e.photoURL)||"https://img.onl/TpK2Sb"}})})})},headerRight:function(){return Object(x.jsxs)(l.default,{style:{flexDirection:"row",justifyContent:"space-between",width:80},children:[Object(x.jsx)(E.default,{onPress:function(){},activeOpacity:.5,children:Object(x.jsx)(L.default,{name:"camerao",size:24,color:"black"})}),Object(x.jsx)(E.default,{onPress:function(){return t.navigate("AddChat")},activeOpacity:.5,children:Object(x.jsx)(B.default,{name:"pencil",size:24,color:"black"})})]})}})}),[t]);var u=function(e,n){t.navigate("Chat",{id:e,chatName:n})};return Object(x.jsx)(T.default,{children:Object(x.jsx)(k.default,{style:P.container,children:r.map((function(e){var t=e.id,n=e.data.chatName;return Object(x.jsx)(I,{id:t,chatName:n,enterChat:u},t)}))})})},P=a.default.create({container:{height:"100%"}}),N=function(e){var t=e.navigation,n=Object(d.useState)(""),a=s()(n,2),r=a[0],i=a[1];Object(d.useLayoutEffect)((function(){t.setOptions({title:"Add a new Chat",headerBackTitle:"Chats"})}),[]);var o=function(){var e=c()((function*(){try{yield Object(p.addDoc)(Object(p.collection)(m,"chats"),{chatName:r}),t.goBack()}catch(e){alert(e.message)}}));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)(l.default,{style:A.container,children:[Object(x.jsx)(j.Input,{placeholder:"Enter a chat name",value:r,onChangeText:function(e){return i(e)},onSubmitEditing:o,leftIcon:Object(x.jsx)(j.Icon,{name:"wechat",type:"antdesign",size:24,color:"black"})}),Object(x.jsx)(j.Button,{disabled:!r,onPress:o,title:"Create new Chat"})]})},A=a.default.create({container:{backgroundColor:"white",padding:30,height:"100%"}}),U=n(14),z=n(182),D=n(129),W=n(181),H=n(327),F=n(328),K=function(e){var t=e.navigation,n=e.route,a=Object(d.useState)(""),r=s()(a,2),i=r[0],o=r[1],f=Object(d.useState)([]),b=s()(f,2),O=b[0],y=b[1];Object(d.useLayoutEffect)((function(){t.setOptions({title:"Chat",headerBackTitleVisible:!1,headerTitleAlign:"left",headerTitle:function(){var e;return Object(x.jsxs)(l.default,{style:{flexDirection:"row",alignItems:"center"},children:[Object(x.jsx)(j.Avatar,{rounded:!0,source:{uri:null==(e=O[0])?void 0:e.data.photoURL}}),Object(x.jsx)(C.default,{style:{color:"white",fontWeight:"700",marginLeft:10},children:n.params.chatName})]})},headerLeft:function(){return Object(x.jsx)(E.default,{onPress:t.goBack,children:Object(x.jsx)(L.default,{name:"arrowleft",size:24,color:"white"})})},headerRight:function(){return Object(x.jsxs)(l.default,{style:{flexDirection:"row",justifyContent:"space-between",width:80},children:[Object(x.jsx)(E.default,{onPress:t.goBack,children:Object(x.jsx)(H.default,{name:"video-camera",size:24,color:"white"})}),Object(x.jsx)(E.default,{onPress:t.goBack,children:Object(x.jsx)(F.default,{name:"call",size:24,color:"white"})})]})}})}),[t,O]);var v=function(){var e=c()((function*(){try{D.default.dismiss();var e=Object(p.doc)(m,"chats",n.params.id);yield Object(p.addDoc)(Object(p.collection)(e,"messages"),{timestamp:Object(p.serverTimestamp)(),message:i,displayName:g.currentUser.displayName,email:g.currentUser.email,photoURL:g.currentUser.photoURL})}catch(t){alert(t.message)}}));return function(){return e.apply(this,arguments)}}();return Object(d.useLayoutEffect)((function(){var e=Object(p.doc)(m,"chats",n.params.id),t=Object(p.query)(Object(p.collection)(e,"messages"),Object(p.orderBy)("timestamp","desc"));return Object(p.onSnapshot)(t,(function(e){return y(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[n]),Object(x.jsxs)(T.default,{style:{flex:1,backgroundColor:"white"},children:[Object(x.jsx)(h.StatusBar,{style:"light"}),Object(x.jsx)(u.default,{behavior:"ios"===U.default.OS?"padding":"height",style:q.container,keyboardVerticalOffset:90,children:Object(x.jsx)(W.default,{onPress:D.default.dismiss,children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(k.default,{contentContainerStyle:{paddingTop:15},children:O.map((function(e){var t=e.id,n=e.data;return n.email===g.currentUser.email?Object(x.jsxs)(l.default,{style:q.reciever,children:[Object(x.jsx)(j.Avatar,{position:"absolute",bottom:-15,right:-5,rounded:!0,size:30,source:{uri:n.photoURL}}),Object(x.jsx)(C.default,{style:q.recieverText,children:n.message})]},t):Object(x.jsxs)(l.default,{style:q.sender,children:[Object(x.jsx)(j.Avatar,{position:"absolute",bottom:-15,left:-5,rounded:!0,size:30,source:{uri:n.photoURL}}),Object(x.jsx)(C.default,{style:q.senderText,children:n.message}),Object(x.jsx)(C.default,{style:q.senderName,children:n.displayName})]},t)}))}),Object(x.jsxs)(l.default,{style:q.footer,children:[Object(x.jsx)(z.default,{value:i,onChangeText:function(e){return o(e)},onSubmitEditing:v,placeholder:"Signal Message",style:q.textInput}),Object(x.jsx)(E.default,{onPress:v,activeOpacity:.5,children:Object(x.jsx)(F.default,{name:"send",size:24,color:"#2B68E6"})})]})]})})})]})},q=a.default.create({container:{flex:1},footer:{flexDirection:"row",alignItems:"center",width:"100%",padding:15},textInput:{bottom:0,height:40,flex:1,marginRight:15,backgroundColor:"#ECECEC",padding:10,color:"grey",borderRadius:"30"},reciever:{padding:15,backgroundColor:"#ECECEC",alignSelf:"flex-end",borderRadius:20,marginRight:15,marginBottom:20,maxWidth:"80%",position:"relative"},sender:{padding:15,backgroundColor:"#2B68E6",alignSelf:"flex-start",borderRadius:20,margin:15,maxWidth:"80%",position:"relative"},senderName:{left:10,paddingRight:10,fontSize:10,color:"white"},recieverText:{color:"black",fontWeight:"500",marginLeft:10},senderText:{color:"white",fontWeight:"500",marginLeft:10,marginBottom:15}}),M=n(329),J=Object(M.default)(),V={headerStyle:{backgroundColor:"#2C6BED"},headerTitleStyle:{color:"white"},headerTintColor:"white"};function _(){return Object(x.jsx)(r.default,{children:Object(x.jsxs)(J.Navigator,{initialRouteName:"Home",screenOptions:V,children:[Object(x.jsx)(J.Screen,{name:"Login",component:y}),Object(x.jsx)(J.Screen,{name:"Register",component:S}),Object(x.jsx)(J.Screen,{name:"Home",component:R}),Object(x.jsx)(J.Screen,{name:"AddChat",component:N}),Object(x.jsx)(J.Screen,{name:"Chat",component:K})]})})}a.default.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}})},225:function(e,t,n){e.exports=n(311)}},[[225,1,2]]]);
//# sourceMappingURL=app.59458678.chunk.js.map